<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.itec.mapper.MangInfoMapper">
  <resultMap id="BaseResultMap" type="com.itec.pojo.MangInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Oct 13 00:26:12 HKT 2024.
    -->
    <id column="MANAGER_CD" jdbcType="VARCHAR" property="managerCd" />
    <id column="MANAGER_CHRCD" jdbcType="VARCHAR" property="managerChrcd" />
    <result column="MANAGER_NM" jdbcType="VARCHAR" property="managerNm" />
    <result column="MANAGER_CUST_ID" jdbcType="VARCHAR" property="managerCustId" />
    <result column="MANAGER_PNO" jdbcType="VARCHAR" property="managerPno" />
    <result column="MANAGER_JOB" jdbcType="VARCHAR" property="managerJob" />
    <result column="MANAGER_RMK" jdbcType="VARCHAR" property="managerRmk" />
    <result column="MANAGER_MAIL" jdbcType="VARCHAR" property="managerMail" />
    <result column="MANAGER_CRD_USR" jdbcType="VARCHAR" property="managerCrdUsr" />
    <result column="MANAGER_CRD_DT" jdbcType="DATE" property="managerCrdDt" />
    <result column="MANAGER_UPD_USR" jdbcType="VARCHAR" property="managerUpdUsr" />
    <result column="MANAGER_UPD_DT" jdbcType="DATE" property="managerUpdDt" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Sun Oct 13 00:26:12 HKT 2024.
    -->
    MANAGER_CD, MANAGER_CHRCD, MANAGER_NM, MANAGER_CUST_ID, MANAGER_PNO, MANAGER_JOB, 
    MANAGER_RMK, MANAGER_MAIL, MANAGER_CRD_USR, MANAGER_CRD_DT, MANAGER_UPD_USR, MANAGER_UPD_DT
  </sql>
 
 <!--新增经理-->
  <insert id="insertMang" parameterType="java.util.List">
    INSERT INTO mang_tbl (MANAGER_CD, MANAGER_CHRCD, MANAGER_NM, 
                          MANAGER_CUST_ID, MANAGER_PNO, MANAGER_JOB, 
                          MANAGER_RMK, MANAGER_MAIL, MANAGER_CRD_USR, 
                          MANAGER_CRD_DT, MANAGER_UPD_USR, MANAGER_UPD_DT)
    VALUES
    <foreach collection="list" item="item" separator=",">
        (#{item.managerCd, jdbcType=VARCHAR}, 
         #{item.managerChrcd, jdbcType=VARCHAR}, 
         #{item.managerNm, jdbcType=VARCHAR}, 
         #{item.managerCustId, jdbcType=VARCHAR}, 
         #{item.managerPno, jdbcType=VARCHAR}, 
         #{item.managerJob, jdbcType=VARCHAR}, 
         #{item.managerRmk, jdbcType=VARCHAR}, 
         #{item.managerMail, jdbcType=VARCHAR}, 
         #{item.managerCrdUsr, jdbcType=VARCHAR}, 
         #{item.managerCrdDt, jdbcType=DATE}, 
         #{item.managerUpdUsr, jdbcType=VARCHAR}, 
         #{item.managerUpdDt, jdbcType=DATE})
    </foreach>
</insert>
  
 <!-- 更新经理多条数据时每个字段循环-->

  <update id="updateMangByCustId" parameterType="java.util.List">
    UPDATE mang_tbl
    <set>
        MANAGER_NM = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerNm, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_NM
        END,
        MANAGER_PNO = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerPno, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_PNO
        END,
        MANAGER_JOB = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerJob, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_JOB
        END,
        MANAGER_RMK = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerRmk, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_RMK
        END,
        MANAGER_MAIL = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerMail, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_MAIL
        END,
        MANAGER_UPD_USR = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerUpdUsr, jdbcType=VARCHAR}
            </foreach>
            ELSE MANAGER_UPD_USR
        END,
        MANAGER_UPD_DT = CASE
            <foreach collection="list" item="item" separator=" ">
                WHEN MANAGER_CD = #{item.managerCd, jdbcType=VARCHAR} THEN #{item.managerUpdDt, jdbcType=DATE}
            </foreach>
            ELSE MANAGER_UPD_DT
        END
    </set>
    WHERE MANAGER_CUST_ID = #{list[0].managerCustId, jdbcType=VARCHAR}
</update>
 
  
</mapper>